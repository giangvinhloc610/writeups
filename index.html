<!DOCTYPE html>
<html>
<head>
    <!-- meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="giangvinhloc610's stupid writeups :)">
    <meta name="keywords" content="giangvinhloc610, raspiduino, Giang Vinh Loc">
    <meta name="author" content="Giang Vinh Loc">

    <!-- favicon -->
    <link rel="icon" type="image/x-icon" href="https://giangvinhloc610.github.io/imgs/kp.png">

    <!-- title -->
    <title>giangvinhloc610's stupid writeups</title>

    <!-- CSS -->
    <link rel="stylesheet" href="main.css">
</head>
<body>
    <a href="https://giangvinhloc610.github.io"><img style="float: right;" src="../imgs/kp.png" width="138" height="171" alt="kernel panik icon"></a>

    <h1>My stupid writeups</h1>
    <p>This page contain a list of my stupid writeups generated by a (kind of) CMS made my myself :)</p>

    <!-- Break line to separate from icon, make it better for phone users -->
    <hr>

    <div class="outer" id="list"></div>
    
    <!-- Implement a content listing using Github Content API -->
    <!-- Source: https://stackoverflow.com/a/53218452/15365513 -->

    <noscript>
        <p>You need to enable Javascript to be able to see the list. If you still don't want to enable it, you can browse the directory manually on <a href="https://github.com/giangvinhloc610/writeups/">Github</a> (I wonder how they work without Javascript)</p>
    </noscript>

    <script>
    var htmlString = ''; // Construct the big box

    (async () => {
        // Fetch file list from Github API
        const response = await fetch('https://api.github.com/repos/giangvinhloc610/writeups/contents/posts');
        const data = await response.json();

        // Render each post
        for (var i = (data.length - 1); i >= 0; i--) {
            // Ignore index.html
            if (data[i].name != "index.html") {
                // Fetch description.json from post's folder
                (async (f) => {
                    // Fetch description
                    const p_response = await fetch('https://giangvinhloc610.github.io/writeups/posts/' + f.name + '/description.json');
                    const p_data = await p_response.json();
                    var e = p_data[0];

                    // Render to screen
                    htmlString += '<div class="box"><img src="posts/' + f.name + '/' + e.img + '" alt="' + e.alt + '"><br><a href="posts/' + f.name + '/">' + e.title + '</a><br><p>' + e.content + '</p><br><p style="float: right;">' + e.date + '</p></div>';

                    // Put HTML to screen
                    document.getElementById("list").innerHTML += htmlString;
                    htmlString = ''; // Clear the buffer
                })(data[i])
            }
        }
    })();
    </script>

    <!-- copyleft notice -->
    <footer id="copyleft_text" style="float: right;"></footer>
    <noscript>
        <!-- If you don't have Javascript :) Are you using Nescape or Tor? -->
        <footer id="copyleft_text" style="float: right;">Copyleft 2022-now Giang Vinh Loc</footer>
    </noscript>
    <script type="text/javascript">
        var year = new Date().getFullYear(); // Get current year in number
        
        if (year < 2022) {
            // What the heck?
            document.getElementById("copyleft_text").innerText = "Copyleft 2022 Giang Vinh Loc. Are you time travelling?"         
        }

        else if (year == 2022) {
            document.getElementById("copyleft_text").innerText = "Copyleft 2022 Giang Vinh Loc"
        }

        else if (year > 2022) {
            document.getElementById("copyleft_text").innerText = "Copyleft 2022-" + year.toString() + " Giang Vinh Loc"
        }

        else {
            document.getElementById("copyleft_text").innerText = "Copyleft 2022 Giang Vinh Loc. Is your Javascript VM crazy?"
        }
    </script>
</body>
</html>